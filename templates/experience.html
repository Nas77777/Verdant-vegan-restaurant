<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Progress Steps</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='step-1.css') }}">
</head>
<body>
    <div class="progress-wrapper">
        <!-- Desktop Progress -->
        
            
                <div class="progress-steps">
                    <button class="step-btn active" data-step="1">
                        <span class="step-number">1</span>
                        <div class="step-info">
                            <h3>Location</h3>
                            <p>Choose Location</p>
                        </div>
                    </button>

                    <button class="step-btn" data-step="2">
                        <span class="step-number">2</span>
                        <div class="step-info">
                            <h3>Dining Area </h3>
                            <p>Select Your Dining Area</p>
                        </div>
                    </button>

                    <button class="step-btn" data-step="3">
                        <span class="step-number">3</span>
                        <div class="step-info">
                            <h3>Date & Time</h3>
                            <p>Select Date & Time</p>
                        </div>
                    </button>

                    <button class="step-btn" data-step="4">
                        <span class="step-number">4</span>
                        <div class="step-info">
                            <h3>Details</h3>
                            <p>Confirmation</p>
                        </div>
                    </button>

                    <button class="step-btn" data-step="5">
                        <span class="step-number">5</span>
                        <div class="step-info">
                            <h3>Complete</h3>
                            <p>Confirmation</p>
                        </div>
                    </button>


                    <div class="progress-line"></div>
                </div>
            </div>
        </div>

        <!-- Mobile Progress -->
        <div class="mobile-progress">
            <div class="mobile-header">
                <div class="current-info">
                    <span class="step-count">Step <span class="current">1</span> of 5</span>
                    <h2 class="current-title">Select Type</h2>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" data-progress="20%"></div>
                </div>
                <div class="step-dots">
                    <span class="dot active" data-step="1"></span>
                    <span class="dot" data-step="2"></span>
                    <span class="dot" data-step="3"></span>
                    <span class="dot" data-step="4"></span>
                    <span class="dot" data-step="5"></span>
                </div>
            </div>
        </div>
    </div>

    <main class="main-content">
        <section class="step-section active space-responsive" data-step="1">
            <div class="step-content-wrapper">
                <div class="step-content">
                    <span class="stp-1-title"><h2>Select Your Experience</h2></span>
                    <div class="stp-1-flex-cont">

                        <div class="stp-1-flex-images stp-1-flex-items">
                            <img src="https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800" alt="Signature Experience">

                            <div class="stp-1-flex-box">
                                <h1>Signature Journey</h1>
                                <p style="font-size:18px;">A seven-course culinary adventure featuring our chef's most celebrated creations</p>

                                <ul style="padding-bottom:20px">
                                    <li><span class="step-1-icons">‚≠ê</span>  Signature Dishes</li>
                                    <li><span class="stp-1-icons">üç∏</span> Craft Cocktail Pairing</li>
                                    <li><span class="stp-1-icons">üïô</span> 2 Hour Experience</li>
                                </ul>
                                

                                <span class="stp-1-inline">
                                    <span class="stp-1-price-change"><h2>$125</h2></span>
                                    <span style="font-size:13px; padding-left:5px; position:relative; top:10px;"><h3>per person</h3></span>
                                </span>

                                <span class="stp-1-box-btn">
                                    <a href="#">
                                    <button data-name="Signature Journey" class="stp-1-btn"> Select This Experience </button> </a>
                                </span>

                            </div>
                        </div>

                        <div class="stp-1-flex-images stp-1-flex-items">
                            <img src="https://images.unsplash.com/photo-1592417817098-8fd3d9eb14a5?w=800" alt="Seasonal Experience">

                            <div class="stp-1-flex-box">
                                <h1>Seasonal Tasting</h1>
                                <p style="font-size:18px;">A unique five-course menu celebrating the season's finest ingredients</p>

                                <ul style="padding-bottom:20px">
                                    <li><span class="step-1-icons">üç∞</span>  Decadent Dessert Selection</li>
                                    <li><span class="stp-1-icons">ü•ñ</span> Truffle Bruschetta</li>
                                    <li><span class="stp-1-icons">üïô</span> 2 Hour Experience</li>
                                </ul>
                                

                                <span class="stp-1-inline">
                                    <span class="stp-1-price-change"><h2>$95</h2></span>
                                    <span style="font-size:13px; padding-left:5px; position:relative; top:10px;"><h3>per person</h3></span>
                                </span>

                                <span class="stp-1-box-btn">
                                    <a href="#">
                                    <button data-name="Seasonal Tasting" class="stp-1-btn"> Select This Experience </button> </a>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="experience-addons">
                        <h4>Enhance Your Experience</h4>
                        <div class="addon-options">
                            <label class="addon-option">
                                <input type="checkbox" name="addons" value="Caviar Service">
                                <div class="addon-content">
                                    <div class="addon-info">
                                        <span class="addon-icon">ü¶™</span>
                                        <div class="addon-details">
                                            <h5> Caviar Service</h5>
                                            <p>Experience the luxury of the finest caviar, accompanied by classic garnishes.</p>
                                        </div>
                                    </div>
                                    <span class="addon-price">+$85 pp</span>
                                </div>
                            </label>
                            
                            <label class="addon-option">
                                <input type="checkbox" name="addons" value="Artisan Cheese Board">
                                <div class="addon-content">
                                    <div class="addon-info">
                                        <span class="addon-icon">üßÄ</span>
                                        <div class="addon-details">
                                            <h5>Artisan Cheese Board</h5>
                                            <p>A selection of fine cheeses with gourmet pairings</p>
                                        </div>
                                    </div>
                                    <span class="addon-price">+$65 pp</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>


                
                        </form>
                    </div>
                </div>
        </section>

        <section class="step-section" data-step="2">
            <!-- <div class="step-content-wrapper"> -->
                <!-- Step 2 content -->
            </div>
        </section> 

        <section class="step-section" data-step="3">
            <!-- <div class="step-content-wrapper"> -->
                <!-- Step 3 content -->
            </div>
        </section>

        <section class="step-section" data-step="4">
            <!-- <div class="step-content-wrapper"> -->
                <!-- Step 4 content -->
            </div>
        </section>

        <section class="step-section" data-step="5">
            <!-- <div class="step-content-wrapper"> -->
                <!-- Step 5 content -->
            </div>
        </section>

        

        <script> 
        let add_on = [];

        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    add_on.push(this.value);
                } else {
                    const index = add_on.indexOf(this.value);
                    if (index > -1) {
                        add_on.splice(index, 1);
                    }
                }
                console.log(`Updated add-ons: ${add_on}`);
                
                // Send the updated array after each change
                fetch('/experience/reservation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        field: 'addons',
                        add_on: add_on 
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        console.log(`Add-ons have been selected successfully: ${data.message}`);
                    } else {
                        console.error(`Error: ${data.message}`);
                    }
                })
                .catch(error => {
                    console.error(`Fetch error: ${error}`);
                });
            });
        });


        document.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', function (event) {
                    const experience = this.getAttribute('data-name');

                    fetch('/experience/reservation',{ 
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ experience })

                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            console.log("Experience have been selected successfully:", data.message);
                        } else {
                            console.error("Error:", data.message);
                        }
                    })
                    .catch(error => {
                        console.error("Network error:", error);
                    });
                });
            });

            document.querySelectorAll('.stp-1-btn').forEach(btn => {
                btn.addEventListener('click', function (event) {
                    document.querySelectorAll('.stp-1-btn').forEach(btn => {
                        btn.classList.remove('active');
                        event.preventDefault();
                    });
                    this.classList.add('active');
                });
            });

            document.addEventListener('DOMContentLoaded', function() {
            const progressFill = document.querySelector('.progress-fill');
            if (progressFill) {
                const progressValue = progressFill.getAttribute('data-progress');
                progressFill.style.width = progressValue;
            }
        });

        </script>


        <div class="nav-buttons">
            <a href="{{ url_for('location') }}"> 
            <button class="nav-btn prev" >
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
                </svg>
                <span>Previous</span>
            </button>
        </a>

            <a href="{{ url_for('date_and_time_page') }}">
            <button class="nav-btn next">
                <span>Next</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
        </a>
        </div>
    </main>
</body>
</html>
